
travel.html
ç¬¬
1
é 
(
å…±
1
é )
100%
<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI æ—…éŠè¡Œç¨‹è¦åŠƒåŠ©æ‰‹ v14.0</title>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        :root {
            --primary-color: #2c3e50;
            --accent-color: #d35400;
            --bg-color: #f4f7f6;
            --card-bg: #ffffff;
            --text-color: #333;
        }

        body {
            font-family: 'Segoe UI', 'Microsoft JhengHei', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
        }

        .container {
            width: 100%;
            max-width: 700px;
            background: var(--card-bg);
            border-radius: 16px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.08);
            padding: 30px;
        }

        h1 { text-align: center; color: var(--primary-color); margin-bottom: 25px; font-size: 1.8rem; }

        .settings-box { background: #fff8e1; padding: 20px; border-radius: 12px; border: 1px solid #ffe0b2; margin-bottom: 25px; }
        .form-group { margin-bottom: 20px; }
        
        /* ä¿®æ”¹ Label æ¨£å¼ä»¥å®¹ç´é€£çµ */
        .label-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; }
        label { font-weight: 600; color: var(--primary-color); font-size: 1rem; margin: 0; }
        
        /* æ•™å­¸é€£çµæ¨£å¼ */
        .help-link {
            font-size: 0.9rem; color: #1976d2; text-decoration: none; cursor: pointer;
            display: flex; align-items: center; gap: 5px; transition: color 0.2s;
        }
        .help-link:hover { color: #0d47a1; text-decoration: underline; }

        input, select, textarea {
            width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 15px;
            box-sizing: border-box; background-color: #fff; font-family: inherit;
        }
        input:focus, select:focus, textarea:focus { border-color: var(--accent-color); outline: none; }

        .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .people-group { display: flex; gap: 10px; }
        .people-input-wrapper { position: relative; flex: 1; }
        .people-input-wrapper span { position: absolute; right: 10px; top: 50%; transform: translateY(-50%); color: #888; font-size: 13px; }
        @media (max-width: 600px) { .grid-2 { grid-template-columns: 1fr; } }

        .transport-options, .style-options { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; }
        .transport-radio, .style-radio { display: none; }
        
        .transport-label, .style-label {
            display: flex; flex-direction: row; align-items: center; justify-content: center;
            padding: 12px 5px; border: 2px solid #e0e0e0; border-radius: 8px;
            cursor: pointer; text-align: center; font-size: 14px; gap: 8px;
        }
        .transport-radio:checked + .transport-label, .style-radio:checked + .style-label {
            border-color: var(--accent-color); background-color: #fef5e7; color: var(--accent-color); font-weight: bold;
        }

        .tags-container { display: flex; flex-wrap: wrap; gap: 8px; }
        .tag-checkbox { display: none; }
        .tag-label { padding: 6px 14px; background-color: #f0f0f0; border-radius: 20px; cursor: pointer; font-size: 13px; }
        .tag-checkbox:checked + .tag-label { background-color: var(--primary-color); color: white; }

        button.submit-btn {
            width: 100%; padding: 15px; background-color: var(--accent-color); color: white;
            border: none; border-radius: 10px; font-size: 18px; font-weight: bold; cursor: pointer; margin-top: 20px;
        }
        button.submit-btn:hover { background-color: #a04000; }
        button.submit-btn:disabled { background-color: #ccc; cursor: not-allowed; }

        #result-section { display: none; margin-top: 30px; }
        #pdf-content-area {
            padding: 40px; background-color: #ffffff; color: #000; border: 1px solid #eee; border-radius: 12px;
            font-size: 15px; line-height: 1.8;
        }
        #pdf-content-area h1 { font-size: 24px; color: #d35400; border-bottom: 2px solid #eee; padding-bottom: 15px; text-align: center;}
        #pdf-content-area h3 { color: #e67e22; margin-top: 25px; border-bottom: 1px solid #eee; padding-bottom: 5px; }
        #pdf-content-area strong { color: #d35400; font-weight: 800; }
        
        .action-buttons { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; margin-top: 20px; }
        .action-btn { padding: 12px; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; display: flex; justify-content: center; gap:5px;}
        .btn-pdf { background-color: #e74c3c; color: white; }
        .btn-print { background-color: #34495e; color: white; }
        .btn-reload { background-color: #95a5a6; color: white; }

        .tip-card { background: #e3f2fd; border-left: 5px solid #2196f3; padding: 15px; border-radius: 4px; margin-top: 20px; }
        .copy-box { background: #fff; border: 1px solid #bbdefb; padding: 10px; cursor: pointer; margin-top:10px; position: relative;}
        
        .spinner { width: 24px; height: 24px; border: 3px solid #fff; border-top-color: transparent; border-radius: 50%; animation: spin 1s linear infinite; display: none; }
        @keyframes spin { to { transform: rotate(360deg); } }

        @media print {
            body * { visibility: hidden; }
            #pdf-content-area, #pdf-content-area * { visibility: visible; }
            #pdf-content-area { position: absolute; left: 0; top: 0; width: 100%; border: none; padding: 0; margin: 0; }
            .container { box-shadow: none; padding: 0; width: 100%; max-width: 100%; }
        }
    </style>
</head>
<body>

<div class="container">
    <h1>âœˆï¸ AI æ—…éŠè¡Œç¨‹è¦åŠƒ v14.0</h1>

    <div class="settings-box">
        <div class="form-group">
            <div class="label-row">
                <label for="apiKey" style="color: #d35400;">ğŸ”‘ Gemini API Key</label>
                <a class="help-link" onclick="openTutorialPage()">
                    <i class="fas fa-question-circle"></i> å¦‚ä½•ç²å– Key?
                </a>
            </div>
            <input type="password" id="apiKey" placeholder="è«‹è²¼ä¸Šæ‚¨çš„ API Key">
        </div>
        <div class="form-group" style="margin-bottom:0;">
            <label for="aiModel" style="color: #d35400;">ğŸ§  AI æ¨¡å‹é¸æ“‡</label>
            <select id="aiModel">
                <option value="gemini-2.5-flash">âš¡ Gemini 2.5 Flash</option>
                <option value="gemini-2.5-pro">ğŸ§  Gemini 2.5 Pro</option>
                <option value="gemma-3-27b-it">ğŸ’ Gemma 3 27B</option>
                <option value="custom">âœï¸ æ‰‹å‹•è¼¸å…¥æ¨¡å‹åç¨±</option>
            </select>
            <input type="text" id="customModelInput" placeholder="ä¾‹å¦‚: gemini-1.5-pro" style="display:none; margin-top:10px;">
        </div>
    </div>

    <div class="form-group grid-2">
        <div><label>ğŸ“ ç›®çš„åœ°</label><input type="text" id="destination" placeholder="ä¾‹å¦‚ï¼šäº¬éƒ½"></div>
        <div><label>ğŸ“… å‡ºç™¼æ—¥æœŸ</label><input type="date" id="startDate"></div>
    </div>

    <div class="form-group grid-2">
        <div><label>â±ï¸ å¤©æ•¸ <span id="nights-text" style="color:#888;">(1å¤œ)</span></label><input type="number" id="days" value="3" min="1"></div>
        <div><label>ğŸ‘¥ äººæ•¸</label>
            <div class="people-group">
                <div class="people-input-wrapper"><input type="number" id="adults" value="2" min="1"><span>å¤§äºº</span></div>
                <div class="people-input-wrapper"><input type="number" id="children" value="0" min="0"><span>å°å­©</span></div>
            </div>
        </div>
    </div>

    <div class="form-group">
        <label>ğŸš— äº¤é€šæ–¹å¼</label>
        <div class="transport-options">
            <input type="radio" name="transport" id="taxi" value="è¨ˆç¨‹è»Š(Taxi)" class="transport-radio">
            <label for="taxi" class="transport-label"><i class="fas fa-taxi"></i> è¨ˆç¨‹è»Š</label>
            <input type="radio" name="transport" id="drive" value="è‡ªè¡Œé–‹è»Š/ç§Ÿè»Š" class="transport-radio" checked>
            <label for="drive" class="transport-label"><i class="fas fa-car"></i> è‡ªé§•</label>
            <input type="radio" name="transport" id="public" value="å¤§çœ¾é‹è¼¸" class="transport-radio">
            <label for="public" class="transport-label"><i class="fas fa-train"></i> å¤§çœ¾é‹è¼¸</label>
            <input type="radio" name="transport" id="charter" value="åŒ…è»Š(Charter)" class="transport-radio">
            <label for="charter" class="transport-label"><i class="fas fa-bus"></i> åŒ…è»Š</label>
        </div>
    </div>

    <div class="form-group">
        <label>ğŸ¨ æ—…è¡Œåå¥½</label>
        <div class="tags-container">
            <input type="checkbox" id="food" value="åœ¨åœ°ç¾é£Ÿ" class="tag-checkbox" checked><label for="food" class="tag-label">ğŸœ ç¾é£Ÿ</label>
            <input type="checkbox" id="nature" value="å¤§è‡ªç„¶" class="tag-checkbox"><label for="nature" class="tag-label">ğŸŒ² è‡ªç„¶</label>
            <input type="checkbox" id="culture" value="æ­·å²æ–‡åŒ–" class="tag-checkbox"><label for="culture" class="tag-label">ğŸ¯ æ­·å²</label>
            <input type="checkbox" id="shopping" value="è³¼ç‰©" class="tag-checkbox"><label for="shopping" class="tag-label">ğŸ›ï¸ è³¼ç‰©</label>
            <input type="checkbox" id="relax" value="æ”¾é¬†è¡Œç¨‹" class="tag-checkbox"><label for="relax" class="tag-label">â˜• æ”¾é¬†</label>
        </div>
    </div>

    <div class="form-group" style="background: #fff3e0; padding: 15px; border-radius: 12px; border: 2px dashed #ffcc80;">
        <label style="color: #e65100;">âœ¨ è‡ªè¨‚å¿…å»æ™¯é»</label>
        <textarea id="customSpots" placeholder="ä¾‹å¦‚ï¼šç¬¬äºŒå¤©æ™šä¸Šä¸€å®šè¦å»åƒã€Œé˜¿è²¡ç‰›è‚‰æ¹¯ã€"></textarea>
    </div>

    <div class="form-group" style="margin-top: 25px;">
        <label>ğŸ–¼ï¸ é¸æ“‡ç”Ÿæˆåœ–çš„é¢¨æ ¼ (ç”¨æ–¼å’’èª)</label>
        <div class="style-options">
            <input type="radio" name="imgStyle" id="style1" value="watercolor" class="style-radio" checked>
            <label for="style1" class="style-label"><i class="fas fa-paint-brush"></i> æ‰‹ç¹ªæ°´å½©é¢¨</label>
            <input type="radio" name="imgStyle" id="style2" value="cartoon" class="style-radio">
            <label for="style2" class="style-label"><i class="fas fa-smile"></i> å¡é€šè²¼ç´™é¢¨</label>
            <input type="radio" name="imgStyle" id="style3" value="ghibli" class="style-radio">
            <label for="style3" class="style-label"><i class="fas fa-leaf"></i> å‰åœåŠ›å‹•ç•«é¢¨</label>
            <input type="radio" name="imgStyle" id="style4" value="pixel" class="style-radio">
            <label for="style4" class="style-label"><i class="fas fa-gamepad"></i> åƒç´ éŠæˆ²é¢¨</label>
        </div>
    </div>

    <button id="generateBtn" class="submit-btn">
        <div class="spinner" id="loadingSpinner"></div>
        <span id="btnText">é–‹å§‹è¦åŠƒè¡Œç¨‹ âœ¨</span>
    </button>

    <div id="result-section">
        <div id="pdf-content-area">
            <div id="markdown-output"></div>
            <div style="margin-top: 40px; text-align: center; color: #999; font-size: 12px; border-top: 1px solid #ddd; padding-top: 10px;">
                â€” æœ¬è¡Œç¨‹ç”± AI æ—…éŠè¦åŠƒåŠ©æ‰‹ç”Ÿæˆ â€”
            </div>
        </div>

        <div class="action-buttons">
            <button class="action-btn btn-pdf" id="downloadPdfBtn">
                <i class="fas fa-file-pdf"></i> ä¸‹è¼‰ PDF (å¿«é€Ÿ)
            </button>
            <button class="action-btn btn-print" onclick="window.print()">
                <i class="fas fa-print"></i> ç³»çµ±åˆ—å° (æœ€ç©©)
            </button>
            <button class="action-btn btn-reload" onclick="window.scrollTo({top:0, behavior:'smooth'})">
                <i class="fas fa-arrow-up"></i> ä¿®æ”¹
            </button>
        </div>

        <div class="tip-card">
            <div style="font-weight:bold; color:#1565c0; margin-bottom:5px;"><i class="fas fa-magic"></i> AI ç”Ÿåœ–å’’èª</div>
            <p style="font-size:13px; margin:0; color:#555;">è¤‡è£½ä¸‹æ–¹å’’èªï¼Œè²¼çµ¦ AI ç”Ÿæˆ<span id="styleNameDisplay" style="color:#d35400; font-weight:bold;"></span>åœ°åœ–ï¼</p>
            <div class="copy-box" id="imagePromptBox" onclick="copyPrompt()">é»æ“Šç”Ÿæˆå’’èª...</div>
        </div>
    </div>
</div>

<script>
    document.getElementById('days').addEventListener('input', function() {
        const d = parseInt(this.value) || 1;
        document.getElementById('nights-text').innerText = `(${d > 1 ? d - 1 : 0}å¤œ)`;
    });
    document.getElementById('aiModel').addEventListener('change', function() {
        document.getElementById('customModelInput').style.display = (this.value === 'custom') ? 'block' : 'none';
    });
    const tomorrow = new Date(); tomorrow.setDate(tomorrow.getDate() + 1);
    document.getElementById('startDate').valueAsDate = tomorrow;

    // --- æ–°å¢ï¼šé–‹å•Ÿæ•™å­¸é é¢å‡½æ•¸ ---
    function openTutorialPage() {
        const win = window.open('', '_blank');
        const content = `
        <!DOCTYPE html>
        <html lang="zh-TW">
        <head>
            <meta charset="UTF-8">
            <title>å¦‚ä½•å…è²»ç²å– Gemini API Key</title>
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
            <style>
                body { font-family: 'Segoe UI', sans-serif; max-width: 800px; margin: 0 auto; padding: 40px; background: #f4f7f6; color: #333; line-height: 1.6; }
                .card { background: white; padding: 30px; border-radius: 15px; box-shadow: 0 5px 20px rgba(0,0,0,0.05); margin-bottom: 20px; }
                h1 { color: #2c3e50; text-align: center; border-bottom: 2px solid #eee; padding-bottom: 15px; }
                h2 { color: #d35400; font-size: 1.3rem; margin-top: 0; display: flex; align-items: center; gap: 10px; }
                .btn { display: inline-block; background: #1a73e8; color: white; padding: 12px 25px; text-decoration: none; border-radius: 8px; font-weight: bold; margin-top: 10px; transition: 0.3s; }
                .btn:hover { background: #1557b0; transform: translateY(-2px); }
                .icon-box { font-size: 3rem; color: #eee; text-align: center; margin: 15px 0; }
                .highlight { background: #fff3cd; padding: 2px 5px; border-radius: 4px; font-weight: bold; color: #856404; }
                .step-num { background: #d35400; color: white; width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 14px; }
            </style>
        </head>
        <body>
            <div class="card">
                <h1>ğŸ”‘ 3 åˆ†é˜å…è²»ç²å– Gemini API Key</h1>
                <p style="text-align: center; color: #666;">åªè¦æœ‰ Google å¸³è™Ÿï¼Œå³å¯å…è²»ç”³è«‹ï¼Œæ¯æ—¥æœ‰é«˜é” 15 å„„ tokens çš„å…è²»é¡åº¦ï¼</p>
                
                <div style="border-left: 4px solid #4caf50; background: #e8f5e9; padding: 15px; margin: 20px 0;">
                    <strong>ğŸ’¡ ç‚ºä»€éº¼éœ€è¦ API Keyï¼Ÿ</strong><br>
                    é€™å€‹ç¶²é å·¥å…·ç›´æ¥é€£ç·šåˆ° Google çš„å¤§è…¦ (Gemini)ï¼ŒAPI Key å°±æ˜¯é€£ç·šçš„ã€Œé€šè¡Œè­‰ã€ã€‚æˆ‘å€‘ä¸æœƒå„²å­˜æ‚¨çš„ Keyï¼Œè«‹å®‰å¿ƒä½¿ç”¨ã€‚
                </div>
            </div>

            <div class="card">
                <h2><span class="step-num">1</span> å‰å¾€ Google AI Studio</h2>
                <p>é»æ“Šä¸‹æ–¹è—è‰²æŒ‰éˆ•ï¼Œå‰å¾€ Google å®˜æ–¹çš„é–‹ç™¼è€…å¹³å° (Google AI Studio)ã€‚</p>
                <div style="text-align: center;">
                    <a href="https://aistudio.google.com/app/apikey" target="_blank" class="btn">
                        å‰å¾€ Google AI Studio <i class="fas fa-external-link-alt"></i>
                    </a>
                </div>
            </div>

            <div class="card">
                <h2><span class="step-num">2</span> ç™»å…¥ä¸¦å»ºç«‹ Key</h2>
                <p>é€²å…¥ç¶²ç«™å¾Œï¼Œè«‹ä¾ç…§ä»¥ä¸‹æ­¥é©Ÿæ“ä½œï¼š</p>
                <ul>
                    <li>å¦‚æœæœªç™»å…¥ï¼Œè«‹å…ˆç™»å…¥æ‚¨çš„ Google å¸³è™Ÿã€‚</li>
                    <li>é»æ“Šç•«é¢å·¦ä¸Šè§’çš„ <span class="highlight">Get API key</span> æŒ‰éˆ•ã€‚</li>
                    <li>é»æ“Šè—è‰²çš„ <span class="highlight">Create API key</span> (å»ºç«‹ API é‡‘é‘°)ã€‚</li>
                </ul>
                <div class="icon-box">
                    <i class="fas fa-mouse-pointer" style="color: #2c3e50;"></i>
                    <i class="fas fa-arrow-right" style="font-size: 20px; color: #ccc;"></i>
                    <i class="fas fa-key" style="color: #f1c40f;"></i>
                </div>
            </div>

            <div class="card">
                <h2><span class="step-num">3</span> è¤‡è£½ä¸¦è²¼ä¸Š</h2>
                <p>ç³»çµ±æœƒç”¢ç”Ÿä¸€ä¸²é•·é•·çš„äº‚ç¢¼ (ä»¥ AIza é–‹é ­)ã€‚</p>
                <ul>
                    <li>é»æ“Šäº‚ç¢¼æ—é‚Šçš„ <span class="highlight">Copy</span> (è¤‡è£½) æŒ‰éˆ•ã€‚</li>
                    <li>å›åˆ°æˆ‘å€‘çš„ã€ŒAI æ—…éŠè¡Œç¨‹è¦åŠƒåŠ©æ‰‹ã€é é¢ã€‚</li>
                    <li>å°‡ Key è²¼å…¥ <span class="highlight">Gemini API Key</span> æ¬„ä½å³å¯ï¼</li>
                </ul>
            </div>

            <div style="text-align: center; color: #999; font-size: 12px; margin-top: 20px;">
                æ•™å­¸é é¢ç”± AI æ—…éŠåŠ©æ‰‹è‡ªå‹•ç”Ÿæˆ
            </div>
        </body>
        </html>
        `;
        win.document.write(content);
        win.document.close();
    }

    // --- ä¸»ç¨‹å¼ ---
    document.getElementById('generateBtn').addEventListener('click', async () => {
        const apiKey = document.getElementById('apiKey').value.trim();
        if (!apiKey) { alert("è«‹è¼¸å…¥ API Keyï¼"); return; }
        const destination = document.getElementById('destination').value;
        if (!destination) { alert("è«‹è¼¸å…¥ç›®çš„åœ°ï¼"); return; }

        const btn = document.getElementById('generateBtn');
        const spinner = document.getElementById('loadingSpinner');
        const btnText = document.getElementById('btnText');
        const resultSection = document.getElementById('result-section');
        const mdOutput = document.getElementById('markdown-output');
        const promptBox = document.getElementById('imagePromptBox');
        const styleNameDisplay = document.getElementById('styleNameDisplay');

        btn.disabled = true; spinner.style.display = 'block'; btnText.innerText = "è¦åŠƒä¸­...";
        resultSection.style.display = 'none';

        try {
            let model = document.getElementById('aiModel').value;
            if (model === 'custom') model = document.getElementById('customModelInput').value.trim();
            
            const startDate = document.getElementById('startDate').value;
            const days = document.getElementById('days').value;
            const adults = document.getElementById('adults').value;
            const children = document.getElementById('children').value;
            const transport = document.querySelector('input[name="transport"]:checked').value;
            const customSpots = document.getElementById('customSpots').value.trim();
            const checkboxes = document.querySelectorAll('.tag-checkbox:checked');
            const interests = Array.from(checkboxes).map(cb => cb.value).join('ã€');
            
            const imgStyleValue = document.querySelector('input[name="imgStyle"]:checked').value;
            let styleText = "æ‰‹ç¹ªæ°´å½©é¢¨";
            let styleName = "æ‰‹ç¹ªæ°´å½©é¢¨";
            if(imgStyleValue === 'cartoon') { styleText = "ç¾å¼å¡é€šè²¼ç´™é¢¨"; styleName = "å¡é€šè²¼ç´™é¢¨"; }
            if(imgStyleValue === 'ghibli') { styleText = "å‰åœåŠ›å‹•ç•«èƒŒæ™¯é¢¨"; styleName = "å‰åœåŠ›é¢¨"; }
            if(imgStyleValue === 'pixel') { styleText = "å¾©å¤åƒç´ éŠæˆ²é¢¨"; styleName = "åƒç´ é¢¨"; }
            styleNameDisplay.innerText = styleName;

            const promptText = `ä½ æ˜¯ä¸€å€‹å°éŠã€‚è«‹è¦åŠƒè¡Œç¨‹ï¼š
            - åœ°é»ï¼š${destination} (${startDate}å‡ºç™¼, ${days}å¤©)
            - äººæ•¸ï¼š${adults}å¤§${children}å°
            - äº¤é€šï¼š${transport}
            - åå¥½ï¼š${interests}
            ${customSpots ? `\n- å¿…å»ï¼š${customSpots}` : ''}
            
            **è¦æ±‚**ï¼š
            1. çµ¦ä¸€å€‹ç´”æ–‡å­—æ¨™é¡Œã€‚
            2. è©³ç´°æ¯æ—¥è¡Œç¨‹ã€‚
            3. è‹¥ç‚ºè¨ˆç¨‹è»Šè«‹ä¼°ç®—æ¯æ®µè»Šè³‡ã€‚
            4. é™„ä¸Šé ç®—è¡¨ã€‚
            5. ç”¨ Markdownã€‚`;

            const responseText = await callGeminiAPI(apiKey, model, promptText);

            const lines = responseText.split('\n');
            const title = lines[0].replace(/[#*]/g, '').trim();
            const headerHtml = `<h1 style="text-align:center; margin-bottom:30px; border-bottom:none;">${title}</h1>`;
            mdOutput.innerHTML = headerHtml + marked.parse(responseText);

            const imgPrompt = `è«‹æ ¹æ“šé€™ä»½ PDF è¡Œç¨‹è¡¨ï¼Œç¹ªè£½ä¸€å¼µã€Œ${styleText}ã€çš„æ—…éŠåœ°åœ–æ’ç•«ï¼Œæ¨™ç¤ºä¸»è¦æ™¯é»èˆ‡è·¯å¾‘ï¼Œç•«é¢è¦è±å¯Œç²¾ç¾ã€‚`;
            promptBox.innerText = imgPrompt;
            promptBox.setAttribute('data-full-text', imgPrompt);

            resultSection.style.display = 'block';
            resultSection.scrollIntoView({ behavior: 'smooth' });

        } catch (error) {
            alert("éŒ¯èª¤ï¼š" + error.message);
        } finally {
            btn.disabled = false; spinner.style.display = 'none'; btnText.innerText = "é‡æ–°è¦åŠƒ âœ¨";
        }
    });

    async function callGeminiAPI(apiKey, model, prompt) {
        const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/${model}:generateContent?key=${apiKey}`;
        const response = await fetch(apiUrl, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ contents: [{ parts: [{ text: prompt }] }] })
        });
        if (!response.ok) {
            let msg = "API Error";
            try { const d = await response.json(); msg = d.error?.message || msg; } catch(e){}
            throw new Error(msg);
        }
        const data = await response.json();
        return data.candidates[0].content.parts[0].text;
    }

    document.getElementById('downloadPdfBtn').addEventListener('click', function() {
        window.scrollTo(0, 0);
        const element = document.getElementById('pdf-content-area');
        const dest = document.getElementById('destination').value || 'Travel';
        const opt = {
            margin: 10,
            filename: `${dest}_è¡Œç¨‹è¡¨.pdf`,
            image: { type: 'jpeg', quality: 0.98 },
            html2canvas: { scale: 2, useCORS: true, backgroundColor: "#ffffff", scrollY: 0, scrollX: 0 },
            jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
        };
        html2pdf().set(opt).from(element).save();
    });

    function copyPrompt() {
        const box = document.getElementById('imagePromptBox');
        const text = box.getAttribute('data-full-text');
        if(!text) return;
        navigator.clipboard.writeText(text).then(() => {
            const originalText = box.innerText;
            box.innerText = "âœ… å·²è¤‡è£½ï¼";
            box.style.background = "#dcedc8";
            setTimeout(() => { box.innerText = text; box.style.background = "#fff"; }, 2000);
        });
    }
</script>

</body>
</html>
ç›®å‰é¡¯ç¤ºçš„æ˜¯ã€Œtravel.htmlã€ã€‚